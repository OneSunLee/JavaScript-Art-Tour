## 文档对象模型

---

### 基本概念

当我们在浏览器中打开一个 Web 页面时，浏览器会读取并解析 HTML 源代码，根据预定的规则建立一个模型，再根据这个模型在屏幕上绘制页面。这个过程就像设计建筑物，根据原始图纸到模型再到实际的建筑。不过，根据 HTML 源代码构建出的模型是一个树状结构，`<html>` 标签是树根（即“根元素”），`<head>`和`<body>`构成了树干的主要分支，接着是它们的子元素，分别成为了各级枝叶和花朵。

我们在使用 Microsoft Office Word 等文字编辑软件编写一份文档时，它会包含标题、图片、表格、段落等内容，内容通过一定的层级结构相联系。而 HTML 页面的主要构成与此类似，因此一份 HTML 文件也被视作一种*文档*。文档中包含的内容属于不同的对象，它们拥有自己的属性，是绘制页面的模型的组件。模型表现为一种树状结构，它的每一部分与页面呈现出的效果是息息相关的，这种结构更正式的叫法是*文档对象模型*（Document Object Model，DOM）。

DOM 就像一棵从上往下生长的树，因此又叫 *DOM 树*，它就像一本家谱。家谱本身就是树状结构的一种例子，用于表示一个人类家族的谱系，并使用 `parent`（父辈）、`child` （子代）、`sibling`（兄弟）等记号来表明家族成员的关系。家谱可以把一些相当复杂的关系简明地表示出来：一位特定的家族成员，既是其他一些成员的父辈，又是另一位成员的子代，同时还是另一位成员的兄弟。我们可以通过家族关系中某个成员所处的位置来找到这个成员本身，当然，由于每个成员都会拥有一个名字，我们也可以通过名字来找到指定的成员。

下面是一份非常简单的 Web 页面，展示了一个普通小学生的暑假日常安排。

![1562998447733](assets/1562998447733.png)

HTML 源代码如下：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>备忘录</title>
	</head>
	<body>
		<h1>今天的任务安排</h1>
		<p>及时当勉励，岁月不待人。</p>
		<ul id="notes">
			<li class="first">做《红楼梦》的摘抄</li>
			<li class="first">背诵《春江花月夜》</li>
			<li class="second">临摹三页字帖</li>
			<li class="second">练习D大调音阶</li>
		</ul>
	</body>
</html>
```

这份文档可以用一个基本的模型表示：

![1562999615730](assets/1562999615730.png)

现在我们来分析一下它的结构。在 `<!DOCTYPE html>` 这行特殊的声明之后，一个打开的 `<html>` 标签代表整个文档的开始，这个页面里所有其他元素都在这个元素里面，换句话说，`<html>` 是所有其他元素的父辈，同时这个 `<html>` 元素既没有父辈，也没有兄弟。假设这是一棵真正的树，那么 `<html>` 标签就是树根，它同时*代表*了整个文档。

接下来，我们发现 `<head>` 和 `<body>` 这两个分支，它们位于同一层次且互不包含，所以它们是兄弟关系。它们是 `<html>` 的子代元素（或简称*子元素*），又有着各自的子元素，因此，它们同时也是其它一些元素的父辈元素（或简称*父元素*）。

`<head>` 元素有两个子元素：`<meta>` 和 `<title>` ，这两个元素时兄弟关系。`<body>` 元素也有着三个子元素，：`<h1>`、`<p>` 和 `<ul>`，它们也是兄弟关系，其中 `<ul>` 拥有属性 `id` ，其值为 `"notes"`，也就是用 `"notes"`这个名称来作为这个元素的唯一标识。它也有三个子元素，都是 `<li>` 元素，拥有各自的 `class` 属性。

我们可以把一个文档中的各个元素对应为一本家谱中的一个个成员，可以用类似的术语来描述 DOM。但这份“家谱”中记录的可不仅仅是元素，确切地说，DOM 这本“家谱”记载的是一个个*节点*。





### 节点

