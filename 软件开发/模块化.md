## 山中无岁月·模块化

---

### 为何使用模块

> 一次又一次的事实证明，小的、组织良好的代码远比庞大的代码更容易理解、更易于维护。因此，很自然，优化程序的结构和组织的方式，就是把它们分成小的、耦合相对松散的片段，这些片段称为模板。
>
> ——《JavaScript Ninja》

好的作者把他们的书组织成逻辑紧密的章节，好的程序员把代码分为一些模块。章节是一些句子聚合在一起，组成一个“主题”。模块就是把一些代码聚合在一起，组成一个“功能”。模块的意图有点像类，但模块的层次比类更高，模块中代码的关系比类要松散。类可能是现实世界的事物的逻辑表示，而一个模块就是有相互关联的“一些事物”的集合，按需取用。如果说一个函数（方法）是一个零件，那么包含了一系列方法的类就是一台机器，而一个模块就是工厂里的一套车间，本身能够独立完成整个加工流程，组合而成就成了庞大的工厂。

一个好的模块应该是*独立的*，它可以被随时加入或者移除，而不会损害整个系统或应用程序。模块拥有的特点包括：

- 可维护性。因为模块是独立的，一个设计良好的模块会让外面的代码对自己的依赖越少越好，这样模块的更新和改进就更加灵活，外部代码需要关注的细节也就越少，同时减少了“这些功能”对“那些功能”的关联造成的影响。
- 提供命名空间。在 JavaScript 里面，如果一个标识符在最顶级的函数之外声明，它就直接变成全局可用，当应用程序越来越大，容易出现命名冲突的情况，产生难以排查的问题。使用模块化开发来封装独立的标识符，可以避免污染全局环境。
- 重用代码。我们有时候会为了方便，从先前的代码中拷贝一些到新的项目，这没有问题，但是更好的方法是，通过将代码封装成可重复使用的模块，来避免机械的复制粘贴，同时保持代码的简洁和关注点的单一性。



### 模块模式







### AMD 和 CommonJS







### ECMAScript 6 的模块







### 在浏览器中使用现代模块







