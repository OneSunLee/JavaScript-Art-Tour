## 白马非马·装饰器

---

> 这是某种令人惊骇而不知名的杰作，在不可名状的晨曦中依稀可见，宛如在欧洲文明的地平线上瞥见的亚洲文明的剪影。
>
> ——维克多·雨果《就英法联军远征中国致巴特勒上尉的信》

JavaScript 世界新开张了一家蛋糕房。大厨拿出一块蛋糕胚，抹上糖霜，涂上果酱，放上鲜果，撒上可可粉或咖啡粉，摆上黑色和白色的巧克力，再用奶油沿着边缘雕刻几朵花，一个蛋糕就大致做好了。所有的蛋糕胚都相差无几，有了蛋糕胚，我们就能随心所欲地装饰它，赋予它特别的风味。蛋糕房里，这个裱花袋装着奶油，那个大概装着蓝莓酱或草莓酱。我们只需要按照自己的想法，借助它们来装饰蛋糕。在 JavaScript 中，我们也可以像装饰蛋糕一样装饰类或方法，*装饰器*就是我们手中的裱花袋。

装饰器是一个美妙的特性，人们说它来自另一种叫 Python 的以优雅著称的语言。装饰器在 2016 年时被加入 JavaScript，它在本质上是高阶函数的一种应用。当我们定义一个装饰器时，我们只需要写一个函数，这个函数至少要接受一个参数，这个参数代表将要被装饰的类或方法。然后就可以在需要的地方使用它，用一个 `@` 字符，其后紧接装饰器的名字，接着像通常那样写出类或方法的定义。

现在我们有一个蛋糕类，它只是一个胚，没有光鲜亮丽的色彩和令人垂涎欲滴的滋味。

```javascript
class Cake {
    constructor() {
        this.flavor = "original";
    }
};
```

我们没有裱花袋，让我们来制作一个裱花袋。它装着草莓果酱。

```javascript
const strawberry = (cake) => {
    cake.prototype.flavor = "strawberry";
}
```

现在给蛋糕挤上草莓果酱。

```javascript
@strawberry
class Cake {
    constructor() {
        this.flavor = "original";
    }
};
```



